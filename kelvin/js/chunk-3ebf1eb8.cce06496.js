(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ebf1eb8"],{"169a":function(t,e,s){"use strict";s("368e");var i=s("480e"),a=s("4ad4"),o=s("b848"),n=s("75eb"),r=s("e707"),l=s("e4d3"),c=s("21be"),d=s("f2e7"),h=s("a293"),u=s("58df"),m=s("d9bd"),v=s("80d2");const f=Object(u["a"])(a["a"],o["a"],n["a"],r["a"],l["a"],c["a"],d["a"]);e["a"]=f.extend({name:"v-dialog",directives:{ClickOutside:h["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&Object(m["d"])("full-width",this)},beforeMount(){this.$nextTick(()=>{this.isBooted=this.isActive,this.isActive&&this.show()})},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick(()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout(()=>this.animate=!1,150)})},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):r["a"].options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick(()=>{this.$refs.content.focus(),this.bind()})},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===v["v"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick(()=>t&&t.focus())}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some(t=>t.contains(e))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t.length&&t[0].focus()}}},render(t){const e=[],s={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:this.onClickOutside,args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],on:{click:t=>{t.stopPropagation()}},style:{}};this.fullscreen||(s.style={maxWidth:"none"===this.maxWidth?void 0:Object(v["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(v["g"])(this.width)}),e.push(this.genActivator());let a=t("div",s,this.showLazyContent(this.getContentSlot()));return this.transition&&(a=t("transition",{props:{name:this.transition,origin:this.origin}},[a])),e.push(t("div",{class:this.contentClasses,attrs:{role:"document",tabindex:this.isActive?0:void 0,...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.$createElement(i["a"],{props:{root:!0,light:this.light,dark:this.dark}},[a])])),t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},e)}})},"1dc1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{fluid:""}},[s("tool-box",{attrs:{buttons:t.buttons}}),s("material-data-table",{ref:"grid_view",attrs:{headers:t.default_grid_headers,data:t.all_records,loading:t.loading,general_config:t.records_config.general_config,total_rows:t.records_config.total_rows,"show-status-filter":!1,search_place_holder:"filter_by_product_name"},on:{onChange:t.getRecords,onSelect:t.setSelectedRecords},scopedSlots:t._u([{key:"actions",fn:function(e){return[s("button-role",{staticClass:"mx-2",attrs:{roles:[],tooltip:"edit_record",fab:"",dark:"",small:"",color:"primary"},on:{click:function(){t.editRecord(e.item)}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-pencil")])],1)]}}])},[s("template",{slot:"footer"},[s("div",{staticClass:"v-data-table__wrapper"},[s("table",[s("thead",{staticClass:"v-data-table-header"},[s("tr",{staticClass:"footer"},[s("th",{staticClass:"text-start sortable",attrs:{colspan:"2"}},[s("span",[t._v("Totales:")])]),s("th",{staticClass:"text-right sortable",staticStyle:{width:"20%","min-width":"20%"}},[s("span",[t._v(" "+t._s(t.summary.quantity))])]),s("th",{staticClass:"text-right sortable",staticStyle:{width:"20%","min-width":"20%"}},[s("span",[t._v(t._s(t.summary.unit_cost.format()))])]),s("th",{staticClass:"text-right sortable",staticStyle:{width:"20%","min-width":"20%"}},[s("span",[t._v(t._s(t.summary.total_amount.format()))])]),s("th",{staticClass:"text-left",staticStyle:{width:"5%","min-width":"5%"}},[s("span")])])])])])])],2),s("v-dialog",{attrs:{"max-width":"600px",persistent:""},model:{value:t.show_filter,callback:function(e){t.show_filter=e},expression:"show_filter"}},[s("item-form",{on:{onClose:t.getRecords,onCancel:function(e){t.show_filter=!1}}})],1)],1)},a=[],o=s("2f62");const n="system";var r={data(){return{loading:!1,form_is_valid:!1,saving:!1,buttons:[],full_dialog:{open:!1},form_rules:{required:[t=>!!t||this.$t("field_required")],email:[t=>/.+@.+\..+|^(?![\s\S])/.test(t)||this.$t("must_be_valid")]}}},methods:{...Object(o["b"])({addModalRef:n+"/addModalRef",removeNextModalRef:n+"/removeNextModalRef"})}};const l="item";var c={computed:{},methods:{...Object(o["b"])({saveEntity:l+"/save",get:l+"/get",getAll:l+"/getAll",deleteRecords:l+"/deleteRecords"}),...Object(o["c"])(l,["getInitialFilters"]),...Object(o["d"])({clearForm:l+"/clearForm",setSelectedRecords:l+"/setSelectedRecords"}),validate(){return this.$refs.form.validate()?this.form.quantity<=0?(this.system.showMessage("QTY_GREATER_THAN_CERO"),!1):!(this.form.unit_cost<=0)||(this.system.showMessage("UNIT_COST_GREATER_THAN_CERO"),!1):(this.system.showMessage("FILL_FORM"),!1)},async save(){if(!this.validate()||this.saving)return!1;this.saving=!0;const t=await this.saveEntity().catch(t=>{});this.system.showMessage(t?"SAVE_SUCCESS":"SAVE_ERROR"),t&&(this.clearForm(),this.$refs.form.resetValidation(),document.getElementById("product_name").focus(),this.getRecords()),this.form.id&&this.$emit("onCancel"),this.saving=!1},async getRecords(t){this.loading=!0;const e=await this.getAll(t).catch(t=>{this.logError(t)});this.loading=!1,e||this.system.showMessage("ERROR_LOADING_DATA")},async _deleteRecords(){const t=this.records_config.selected.length;if(!t)return void this.system.showMessage("SELECT_ONE_RECORD");const e=await this.system.confirm(t>1?this.$t("sure_to_delete_many"):this.$t("sure_to_delete_one"));if(!e)return;const s=await this.deleteRecords().catch(t=>{this.logError(t)});this.system.showMessage(s?1==t?"DEACTIVATE_SUCCESS":"DEACTIVATE_SUCCESS_PLURAL":"DEACTIVATE_ERROR"),this.$refs.grid_view.removeSelected(),this.getRecords()},async editRecord(t){await this.get(t.id),this.show_filter=!0},cleanFilters(){this.$refs.grid_view.cleanFilters(this.getInitialFilters())}}},d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{ref:"form",attrs:{autocomplete:"off","lazy-validation":"",onSubmit:"return false;"},model:{value:t.form_is_valid,callback:function(e){t.form_is_valid=e},expression:"form_is_valid"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v(t._s(t.$t("item_crud")))])]),s("v-card-text",[s("v-container",{staticClass:"modal-container"},[s("v-text-field",{ref:"product_name",attrs:{id:"product_name",label:t.$t("product_name"),clearable:"",rules:t.form_rules.required,required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),s("v-row",[s("v-col",{attrs:{xs6:"",md6:"",sm8:""}},[s("v-text-field",{attrs:{required:"",rules:t.form_rules.required,label:t.$t("quantity"),clearable:"",type:"number"},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1),s("v-col",{attrs:{xs6:"",md6:"",sm8:""}},[s("v-text-field",{attrs:{label:t.$t("unit_cost"),clearable:"",type:"number",required:"",rules:t.form_rules.required},model:{value:t.form.unit_cost,callback:function(e){t.$set(t.form,"unit_cost",e)},expression:"form.unit_cost"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"btn-cancel",attrs:{color:"green darken-1",text:""},on:{click:t.cancel}},[t._v(t._s(t.$t("close")))]),s("v-btn",{staticClass:"btn-save",attrs:{color:"blue darken-1",type:"submit",text:""},on:{click:t.save}},[t._v(" "+t._s(t.$t("save"))+" ")])],1)],1)],1)},h=[];const u="item";var m={mixins:[r,c],data:()=>({form_is_valid:!0}),created(){setTimeout(()=>{document.getElementById("product_name").focus()},100);var t=this.$route.params["id"]||null;t&&this.get(t),this.buttons=[{name:"SAVE",onClick:this.save,roles:[(t?"change":"add")+"_item"]},{name:"CANCEL"}]},computed:{...Object(o["e"])(u,["form"])},methods:{validateForm(){},cancel(){this.$emit("onCancel")}}},v=m,f=(s("fdd9"),s("2877")),y=s("6544"),_=s.n(y),p=s("8336"),g=s("b0af"),b=s("99d9"),w=s("62ad"),C=s("a523"),E=s("4bd4"),x=s("0fd9"),S=s("2fa4"),$=s("8654"),k=Object(f["a"])(v,d,h,!1,null,null,null),A=k.exports;_()(k,{VBtn:p["a"],VCard:g["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:w["a"],VContainer:C["a"],VForm:E["a"],VRow:x["a"],VSpacer:S["a"],VTextField:$["a"]});const O="item";var R={components:{ItemForm:A},mixins:[r,c],data:()=>({show_filter:!1}),created(){this.buttons=[{name:"NEW",onClick:this.addNewRecord,roles:[]},{name:"DEACTIVATE",onClick:this.deactivateRecord,roles:["change_item","deactivate_item"]},{name:"CLEAN_FILTER",onClick:this.cleanFilters},{name:"DELETE",onClick:this._deleteRecords}]},computed:{...Object(o["e"])(O,["records_config","summary"]),default_grid_headers(){return this.records_config.grid_headers.map(t=>{return t.text=this.$t(t.text),t})},all_records(){return this.records_config.records.map(t=>{return t.is_active_description=this.getIsActiveDescription(t.is_active),t})}},methods:{addNewRecord(){this.show_filter=!0,setTimeout(()=>{try{this.clearForm(),this.$refs.form.resetValidation(),document.getElementById("product_name").focus()}catch(t){}},100)}}},T=R,I=(s("94c1"),s("169a")),N=s("132d"),L=Object(f["a"])(T,i,a,!1,null,null,null);e["default"]=L.exports;_()(L,{VContainer:C["a"],VDialog:I["a"],VIcon:N["a"]})},"368e":function(t,e,s){},"37af":function(t,e,s){},"3c93":function(t,e,s){},"94c1":function(t,e,s){"use strict";var i=s("9614"),a=s.n(i);a.a},9614:function(t,e,s){},e707:function(t,e,s){"use strict";s("3c93");var i=s("a9ad"),a=s("7560"),o=s("f2e7"),n=s("58df"),r=Object(n["a"])(i["a"],a["a"],o["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(t){const e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",class:this.classes,style:this.styles},e)}}),l=r,c=s("80d2"),d=s("2b0e");e["a"]=d["a"].extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data(){return{overlay:null}},watch:{hideOverlay(t){this.isActive&&(t?this.removeOverlay():this.genOverlay())}},beforeDestroy(){this.removeOverlay()},methods:{createOverlay(){const t=new l({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});t.$mount();const e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay(){if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),requestAnimationFrame(()=>{this.overlay&&(void 0!==this.activeZIndex?this.overlay.zIndex=String(this.activeZIndex-1):this.$el&&(this.overlay.zIndex=Object(c["s"])(this.$el)),this.overlay.value=!0)}),!0},removeOverlay(t=!0){this.overlay&&(Object(c["a"])(this.overlay.$el,"transitionend",()=>{this.overlay&&this.overlay.$el&&this.overlay.$el.parentNode&&!this.overlay.value&&(this.overlay.$el.parentNode.removeChild(this.overlay.$el),this.overlay.$destroy(),this.overlay=null)}),this.overlay.value=!1),t&&this.showScroll()},scrollListener(t){if("keydown"===t.type){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;const e=[c["v"].up,c["v"].pageup],s=[c["v"].down,c["v"].pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!s.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return["auto","scroll"].includes(e.overflowY)&&t.scrollHeight>t.clientHeight},shouldScroll(t,e){return 0===t.scrollTop&&e<0||t.scrollTop+t.clientHeight===t.scrollHeight&&e>0},isInside(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath(t){const e=t.path||this.composedPath(t),s=t.deltaY;if("keydown"===t.type&&e[0]===document.body){const t=this.$refs.dialog,e=window.getSelection().anchorNode;return!(t&&this.hasScrollbar(t)&&this.isInside(e,t))||this.shouldScroll(t,s)}for(let i=0;i<e.length;i++){const t=e[i];if(t===document)return!0;if(t===document.documentElement)return!0;if(t===this.$refs.content)return!0;if(this.hasScrollbar(t))return this.shouldScroll(t,s)}return!0},composedPath(t){if(t.composedPath)return t.composedPath();const e=[];let s=t.target;while(s){if(e.push(s),"HTML"===s.tagName)return e.push(document),e.push(window),e;s=s.parentElement}return e},hideScroll(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(c["b"])(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}})},fdd9:function(t,e,s){"use strict";var i=s("37af"),a=s.n(i);a.a}}]);
//# sourceMappingURL=chunk-3ebf1eb8.cce06496.js.map